{% extends 'base.html' %}

{% block title %}{% if form.instance.pk %}Edit Motion{% else %}New Motion{% endif %}{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto mt-8 px-4">
    <div class="bg-white rounded-xl shadow-lg p-8">
        <h1 class="text-2xl font-bold text-gray-900 mb-2">
            {% if form.instance.pk %}Edit Motion{% else %}Create a New Motion{% endif %}
        </h1>
        <p class="text-gray-600 mb-6">Use this structured template to submit your civic proposal</p>

        <form method="post" class="space-y-6">
            {% csrf_token %}

            <div>
                <label for="id_title" class="block text-sm font-medium text-gray-700 mb-1">Motion Title *</label>
                {{ form.title }}
                {% if form.title.errors %}
                <p class="mt-1 text-sm text-red-600">{{ form.title.errors.0 }}</p>
                {% endif %}
            </div>

            <div>
                <label for="id_evidence" class="block text-sm font-medium text-gray-700 mb-1">Evidence & Lived Experience *</label>
                <p class="text-xs text-gray-500 mb-2">Describe the issue and provide evidence or personal experience</p>
                {{ form.evidence }}
                {% if form.evidence.errors %}
                <p class="mt-1 text-sm text-red-600">{{ form.evidence.errors.0 }}</p>
                {% endif %}
            </div>

            <div>
                <label for="id_proposed_action" class="block text-sm font-medium text-gray-700 mb-1">Proposed Action *</label>
                <p class="text-xs text-gray-500 mb-2">What specific action do you want taken?</p>
                {{ form.proposed_action }}
                {% if form.proposed_action.errors %}
                <p class="mt-1 text-sm text-red-600">{{ form.proposed_action.errors.0 }}</p>
                {% endif %}
            </div>

            <div>
                <label for="id_resource_ask" class="block text-sm font-medium text-gray-700 mb-1">Resource Ask (Micro-Budget) *</label>
                <p class="text-xs text-gray-500 mb-2">What resources or budget do you need?</p>
                {{ form.resource_ask }}
                {% if form.resource_ask.errors %}
                <p class="mt-1 text-sm text-red-600">{{ form.resource_ask.errors.0 }}</p>
                {% endif %}
            </div>

            <div>
                <label for="id_success_measures" class="block text-sm font-medium text-gray-700 mb-1">Success Measures *</label>
                <p class="text-xs text-gray-500 mb-2">How will we know if this motion is successful?</p>
                {{ form.success_measures }}
                {% if form.success_measures.errors %}
                <p class="mt-1 text-sm text-red-600">{{ form.success_measures.errors.0 }}</p>
                {% endif %}
            </div>

            <div>
                <label for="id_jurisdiction" class="block text-sm font-medium text-gray-700 mb-1">Jurisdiction Check *</label>
                <p class="text-xs text-gray-500 mb-2">Which level of government is responsible for this issue?</p>
                {{ form.jurisdiction }}
                {% if form.jurisdiction.errors %}
                <p class="mt-1 text-sm text-red-600">{{ form.jurisdiction.errors.0 }}</p>
                {% endif %}
            </div>

            <div class="bg-blue-50 p-4 rounded-lg">
                <h3 class="font-medium text-gray-900 mb-3">Optional Considerations</h3>

                <div class="mb-4">
                    <label for="id_safeguarding_considerations" class="block text-sm font-medium text-gray-700 mb-1">Safeguarding Considerations</label>
                    {{ form.safeguarding_considerations }}
                </div>

                <div>
                    <label for="id_inclusion_considerations" class="block text-sm font-medium text-gray-700 mb-1">Inclusion Considerations</label>
                    {{ form.inclusion_considerations }}
                </div>
            </div>

            <div class="bg-gray-50 p-4 rounded-lg">
                <label for="id_status" class="block text-sm font-medium text-gray-700 mb-1">Save as</label>
                {{ form.status }}
                <p class="text-xs text-gray-500 mt-2">Draft motions are only visible to you. Published motions appear in the public feed.</p>
            </div>

            <div class="flex justify-end space-x-4">
                <a href="{% url 'motion_feed' %}" class="px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200">Cancel</a>
                <button type="submit" class="px-6 py-2 bg-civic-blue text-white rounded-lg hover:bg-blue-700">
                    {% if form.instance.pk %}Update Motion{% else %}Submit Motion{% endif %}
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
